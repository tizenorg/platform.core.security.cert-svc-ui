CMAKE_MINIMUM_REQUIRED(VERSION 2.6)
PROJECT(ug-setting-manage-certificates-efl C)

INCLUDE(FindPkgConfig)
pkg_check_modules(pkgs
    libtzplatform-config
    REQUIRED
)

SET(CMAKE_C_FLAGS_RELEASE "-O2 -Wall")
SET(CMAKE_C_FLAGS_DEBUG "-O0 -Wall -g -ggdb")
SET(CMAKE_C_FLAGS_CCOV "-O2 -Wall --coverage")

SET(PREFIX ${CMAKE_INSTALL_PREFIX})
SET(PKGNAME "lib${PROJECT_NAME}")
SET(LIBDIR "${PREFIX}/lib")
SET(VERSION 0.1.0)
SET(RESDIR "${PREFIX}/res")
SET(DATADIR "${RESDIR}/etc")
SET(LOCALEDIR "${RESDIR}/locale")
SET(ICONDIR "${RESDIR}/images")
SET(EDJDIR "${RESDIR}/edje")
SET(IMGDIR "${RESDIR}/images")

SET(TARGET_CERT_VIEW "mgr-cert-view")
SET(TARGET_CERT_SELECTION_UG "ug-cert-selection-ug-efl")
SET(TARGET_CERT_MANAGER_UG "ug-setting-manage-certificates-efl")

ADD_DEFINITIONS("-DPREFIX=\"${PREFIX}\"")
ADD_DEFINITIONS("-DPKGNAME=\"${PKGNAME}\"")
ADD_DEFINITIONS("-DPACKAGE_NAME=\"${PKGNAME}\"")
ADD_DEFINITIONS("-DEDJDIR=\"${EDJDIR}\"")
ADD_DEFINITIONS("-DPREFIX=\"${PREFIX}\"")
ADD_DEFINITIONS("-DRESDIR=\"${RESDIR}\"")
ADD_DEFINITIONS("-DDATADIR=\"${DATADIR}\"")
ADD_DEFINITIONS("-DLOCALEDIR=\"${LOCALEDIR}\"")
ADD_DEFINITIONS("-DEDJDIR=\"${EDJDIR}\"")
ADD_DEFINITIONS("-DIMGDIR=\"${IMGDIR}\"")

IF(WAYLAND_SUPPORT)
  ADD_DEFINITIONS(
    "-DHAVE_WAYLAND"
    "-DWAYLAND" # TODO fix exitsing headers system wide
    )
ENDIF(WAYLAND_SUPPORT)

IF(X_SUPPORT)
  ADD_DEFINITIONS(
    "-DHAVE_X"
    )
ENDIF(X_SUPPORT)


ADD_SUBDIRECTORY(view)
ADD_SUBDIRECTORY(ug)
ADD_SUBDIRECTORY(cert-selection-ug)

# i18n
ADD_SUBDIRECTORY(po)

INSTALL(FILES packaging/ug.cert-svc-ui.include DESTINATION /etc/smack/accesses2.d)
